(this["webpackJsonpbalch-dev"]=this["webpackJsonpbalch-dev"]||[]).push([[0],{217:function(e,t,n){},218:function(e,t,n){},220:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=r(n(221)),a=n(463),o=r(n(464));function r(e){return e&&e.__esModule?e:{default:e}}var s=n(32),u="https://api.ambientweather.net/",d=u+"v1/devices/";e.exports=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.apiKey,i=e.applicationKey;if(!n)throw new Error("You need an apiKey");if(!i)throw new Error("You need an applicationKey");var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.apiKey=n,c.applicationKey=i,c.requestQueue=[],c.subscribedDevices=[],c}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_apiRequest",value:function(e){var t=this;return new Promise((function(n,i){setTimeout((function(){(0,c.default)({url:e,json:!0}).then((function(i,c){t.requestQueue=(0,a.filter)((0,a.pipe)((0,a.equals)(e),a.not),t.requestQueue),n(i)})).catch((function(c){429===c.statusCode?(t.requestQueue.push(e),t._apiRequest(e).then(n)):i(c)}))}),1100*t.requestQueue.length)}))}},{key:"_getUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d+e+"?apiKey="+this.apiKey+"&applicationKey="+this.applicationKey}},{key:"userDevices",value:function(){return this._apiRequest(this._getUrl())}},{key:"deviceData",value:function(e,t){if(!e)throw new Error("You need a macAddress for deviceData");var n=this._getUrl(e);return t&&(n+="&"+(0,a.pipe)(a.toPairs,(0,a.map)((0,a.join)("=")),(0,a.join)("&"))(t)),this._apiRequest(n)}},{key:"connect",value:function(){var e=this;this.socket||(this.socket=(0,o.default)(u+"?api=1&applicationKey="+this.applicationKey,{transports:["websocket"]}),["error","connect"].forEach((function(t){e.socket.on(t,(function(n){e.emit(t,n)}))})),this.socket.on("subscribed",(function(t){e.subscribedDevices=t.devices||[],e.emit("subscribed",t)})),this.socket.on("data",(function(t){t.device=(0,a.find)((0,a.propEq)("macAddress",t.macAddress),e.subscribedDevices),e.emit("data",t)})))}},{key:"disconnect",value:function(){this.socket.disconnect(),delete this.socket}},{key:"subscribe",value:function(e){var t=Array.isArray(e)?e:[e];this.socket.emit("subscribe",{apiKeys:t})}},{key:"unsubscribe",value:function(e){var t=Array.isArray(e)?e:[e];this.socket.emit("unsubscribe",{apiKeys:t})}}]),t}(s)},250:function(e,t){},252:function(e,t){},262:function(e,t){},264:function(e,t){},289:function(e,t){},291:function(e,t){},292:function(e,t){},297:function(e,t){},299:function(e,t){},305:function(e,t){},307:function(e,t){},326:function(e,t){},338:function(e,t){},341:function(e,t){},367:function(e,t){},465:function(e,t,n){"use strict";n.r(t);var i=n(44),c=n.n(i),a=n(209),o=n.n(a),r=(n(217),n(9)),s=n(10),u=n(13),d=n(12),l=(n.p,n(218),n(7));var f=function(e){return console.log(e.isLoaded),e.isLoaded?Object(l.jsxs)("div",{className:"b__data-bar",children:[Object(l.jsxs)("div",{className:"b__header",children:[Object(l.jsx)("div",{className:"b__lake",children:Object(l.jsx)("h1",{children:"Balch Lake"})}),Object(l.jsx)("div",{className:"b__states",children:Object(l.jsx)("p",{children:"New Hampshire & Maine"})})]}),Object(l.jsxs)("div",{className:"b__data-block",children:[Object(l.jsx)("h3",{children:"Current Temp"}),Object(l.jsxs)("p",{children:[e.data.lastData.tempf,"\u2109"]})]}),Object(l.jsxs)("div",{className:"b__data-block",children:[Object(l.jsx)("h3",{children:"Current Water Temp"}),Object(l.jsxs)("p",{children:[e.data.lastData.temp2f,"\u2109"]})]})]}):Object(l.jsx)("div",{children:"Data Loading..."})},b=n(220),p=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).state={balchData:null,isLoaded:!1},i}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;new b({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AMBIENT_WEATHER_API_KEY||"395395f5bab942b3aa29ef114d9bf45c3b75b29269a24f6d98679b45cd4f0e1c",applicationKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AMBIENT_WEATHER_APPLICATION_KEY||"4ee25b49536143b7a44e4af382ffeb4840732c06c4d247febbcd7e2e5b5f3c2a"}).userDevices().then((function(t){var n=t[0];e.setState({balchData:n,isLoaded:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,n=e.balchData;return t?Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("div",{className:"b__container",children:Object(l.jsx)(f,{data:n,isLoaded:t})})}):Object(l.jsx)("div",{children:"Loading..."})}}]),n}(c.a.Component),h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,466)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),c(e),a(e),o(e)}))};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root")),h()}},[[465,1,2]]]);
//# sourceMappingURL=main.5e8bfe81.chunk.js.map