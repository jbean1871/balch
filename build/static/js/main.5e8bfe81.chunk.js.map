{"version":3,"sources":["data/ambient.js","images/balch_lake.jpg","components/DataBar.js","App.js","reportWebVitals.js","index.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_requestPromise2","_interopRequireDefault","require","_ramda","_socket2","obj","__esModule","default","EventEmitter","API_URL","AW_API_URL","module","exports","_EventEmitter","AmbientWeatherApi","opts","instance","TypeError","_classCallCheck","this","apiKey","applicationKey","Error","_this","self","call","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","requestQueue","subscribedDevices","subClass","superClass","create","constructor","value","setPrototypeOf","_inherits","url","_this2","Promise","resolve","reject","setTimeout","json","then","res","body","filter","pipe","equals","not","catch","err","statusCode","push","_apiRequest","macAddress","arguments","undefined","_getUrl","toPairs","map","join","_this3","socket","transports","forEach","on","data","emit","devices","device","find","propEq","disconnect","apiKeyOrApiKeys","apiKeys","Array","isArray","Databar","console","log","isLoaded","className","lastData","tempf","temp2f","App","state","balchData","process","AMBIENT_WEATHER_API_KEY","AMBIENT_WEATHER_APPLICATION_KEY","userDevices","setState","DataBar","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5e8bfe81.chunk.js","sourcesContent":["\"use strict\";\n\nvar _createClass = (function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n})();\n\nvar _requestPromise = require(\"request-promise\");\n\nvar _requestPromise2 = _interopRequireDefault(_requestPromise);\n\nvar _ramda = require(\"ramda\");\n\nvar _socket = require(\"socket.io-client\");\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\n      \"this hasn't been initialised - super() hasn't been called\"\n    );\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\")\n    ? call\n    : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\n      \"Super expression must either be null or a function, not \" +\n        typeof superClass\n    );\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true,\n    },\n  });\n  if (superClass)\n    Object.setPrototypeOf\n      ? Object.setPrototypeOf(subClass, superClass)\n      : (subClass.__proto__ = superClass);\n}\n\nvar EventEmitter = require(\"events\");\n\nvar API_URL = \"https://api.ambientweather.net/\";\nvar AW_API_URL = API_URL + \"v1/devices/\";\n\nmodule.exports = (function (_EventEmitter) {\n  _inherits(AmbientWeatherApi, _EventEmitter);\n\n  function AmbientWeatherApi(opts) {\n    _classCallCheck(this, AmbientWeatherApi);\n\n    var apiKey = opts.apiKey,\n      applicationKey = opts.applicationKey;\n\n    if (!apiKey) {\n      throw new Error(\"You need an apiKey\");\n    }\n    if (!applicationKey) {\n      throw new Error(\"You need an applicationKey\");\n    }\n\n    var _this = _possibleConstructorReturn(\n      this,\n      (\n        AmbientWeatherApi.__proto__ || Object.getPrototypeOf(AmbientWeatherApi)\n      ).call(this)\n    );\n\n    _this.apiKey = apiKey;\n    _this.applicationKey = applicationKey;\n    _this.requestQueue = [];\n    _this.subscribedDevices = [];\n    return _this;\n  }\n\n  _createClass(AmbientWeatherApi, [\n    {\n      key: \"_apiRequest\",\n      value: function _apiRequest(url) {\n        var _this2 = this;\n\n        return new Promise(function (resolve, reject) {\n          setTimeout(function () {\n            (0, _requestPromise2.default)({\n              url: url,\n              json: true,\n            })\n              .then(function (res, body) {\n                _this2.requestQueue = (0, _ramda.filter)(\n                  (0, _ramda.pipe)((0, _ramda.equals)(url), _ramda.not),\n                  _this2.requestQueue\n                );\n                resolve(res);\n              })\n              .catch(function (err) {\n                // handle rate limiting\n                if (err.statusCode === 429) {\n                  _this2.requestQueue.push(url);\n                  _this2._apiRequest(url).then(resolve);\n                } else {\n                  reject(err);\n                }\n              });\n          }, _this2.requestQueue.length * 1100);\n        });\n      },\n    },\n    {\n      key: \"_getUrl\",\n      value: function _getUrl() {\n        var macAddress =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : \"\";\n\n        return (\n          AW_API_URL +\n          macAddress +\n          \"?apiKey=\" +\n          this.apiKey +\n          \"&applicationKey=\" +\n          this.applicationKey\n        );\n      },\n    },\n    {\n      key: \"userDevices\",\n      value: function userDevices() {\n        return this._apiRequest(this._getUrl());\n      },\n    },\n    {\n      key: \"deviceData\",\n      value: function deviceData(macAddress, opts) {\n        if (!macAddress) {\n          throw new Error(\"You need a macAddress for deviceData\");\n        }\n        var url = this._getUrl(macAddress);\n        if (opts) {\n          url +=\n            \"&\" +\n            (0, _ramda.pipe)(\n              _ramda.toPairs,\n              (0, _ramda.map)((0, _ramda.join)(\"=\")),\n              (0, _ramda.join)(\"&\")\n            )(opts);\n        }\n        return this._apiRequest(url);\n      },\n    },\n    {\n      key: \"connect\",\n      value: function connect() {\n        var _this3 = this;\n\n        if (this.socket) {\n          return;\n        }\n        this.socket = (0, _socket2.default)(\n          API_URL + \"?api=1&applicationKey=\" + this.applicationKey,\n          {\n            transports: [\"websocket\"],\n          }\n        );\n        [\"error\", \"connect\"].forEach(function (key) {\n          _this3.socket.on(key, function (data) {\n            _this3.emit(key, data);\n          });\n        });\n        this.socket.on(\"subscribed\", function (data) {\n          _this3.subscribedDevices = data.devices || [];\n          _this3.emit(\"subscribed\", data);\n        });\n        this.socket.on(\"data\", function (data) {\n          // find the device this data is for using the macAddress\n          data.device = (0, _ramda.find)(\n            (0, _ramda.propEq)(\"macAddress\", data.macAddress),\n            _this3.subscribedDevices\n          );\n          _this3.emit(\"data\", data);\n        });\n      },\n    },\n    {\n      key: \"disconnect\",\n      value: function disconnect() {\n        this.socket.disconnect();\n        delete this.socket;\n      },\n    },\n    {\n      key: \"subscribe\",\n      value: function subscribe(apiKeyOrApiKeys) {\n        var apiKeys = Array.isArray(apiKeyOrApiKeys)\n          ? apiKeyOrApiKeys\n          : [apiKeyOrApiKeys];\n        this.socket.emit(\"subscribe\", { apiKeys: apiKeys });\n      },\n    },\n    {\n      key: \"unsubscribe\",\n      value: function unsubscribe(apiKeyOrApiKeys) {\n        var apiKeys = Array.isArray(apiKeyOrApiKeys)\n          ? apiKeyOrApiKeys\n          : [apiKeyOrApiKeys];\n        this.socket.emit(\"unsubscribe\", { apiKeys: apiKeys });\n      },\n    },\n  ]);\n\n  return AmbientWeatherApi;\n})(EventEmitter);\n","export default __webpack_public_path__ + \"static/media/balch_lake.8bdbfe75.jpg\";","import React from \"react\";\n\nfunction Databar(props) {\n  console.log(props.isLoaded);\n  if (!props.isLoaded) {\n    return <div>Data Loading...</div>;\n  } else {\n    return (\n      <div className=\"b__data-bar\">\n        <div className=\"b__header\">\n          <div className=\"b__lake\">\n            <h1>Balch Lake</h1>\n          </div>\n          <div className=\"b__states\">\n            <p>New Hampshire & Maine</p>\n          </div>\n        </div>\n        <div className=\"b__data-block\">\n          <h3>Current Temp</h3>\n          <p>{props.data.lastData.tempf}&#x2109;</p>\n        </div>\n        <div className=\"b__data-block\">\n          <h3>Current Water Temp</h3>\n          <p>{props.data.lastData.temp2f}&#x2109;</p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Databar;\n","import bkg from \"./images/balch_lake.jpg\";\nimport \"./App.css\";\nimport DataBar from \"./components/DataBar.js\";\nimport React from \"react\";\nconst AmbientWeatherApi = require(\"./data/ambient\");\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { balchData: null, isLoaded: false };\n  }\n\n  componentDidMount() {\n    const api = new AmbientWeatherApi({\n      apiKey:\n        process.env.AMBIENT_WEATHER_API_KEY ||\n        \"395395f5bab942b3aa29ef114d9bf45c3b75b29269a24f6d98679b45cd4f0e1c\",\n      applicationKey:\n        process.env.AMBIENT_WEATHER_APPLICATION_KEY ||\n        \"4ee25b49536143b7a44e4af382ffeb4840732c06c4d247febbcd7e2e5b5f3c2a\",\n    });\n    api.userDevices().then((devices) => {\n      const balchData = devices[0];\n      this.setState({ balchData: balchData, isLoaded: true });\n    });\n  }\n  render() {\n    let { isLoaded, balchData } = this.state;\n    if (!isLoaded) {\n      return <div>Loading...</div>;\n    } else {\n      return (\n        <div className=\"App\">\n          <div className=\"b__container\">\n            <DataBar data={balchData} isLoaded={isLoaded} />\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}